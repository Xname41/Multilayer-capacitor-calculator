<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<title>Калкулатор на капацитет на коаксиален кабел</title>
<style>
@font-face { font-family: "MyLocalFont"; src: url("https://raw.githubusercontent.com/Xname41/Multilingual-calculator-for-calculating-an-asymmetric-capacitor-bg_en_he_ru/main/Vida41Pro 02.ttf") format("truetype"); }
@font-face { font-family: "MyNumericFont"; src: url("https://raw.githubusercontent.com/Xname41/Multilingual-calculator-for-calculating-an-asymmetric-capacitor-bg_en_he_ru/main/HP-15C_Simulator_Font.ttf") format("truetype"); }

html, body { 
    margin:0; 
    padding:0; 
    width:100%; 
    font-family:"MyLocalFont", sans-serif; 
    background-color:#f0f0f0; 
}

body { 
    display:flex; 
    justify-content:center; 
    padding:20px; 
    box-sizing:border-box; 
}

#container { 
    display: flex; 
    gap: 20px; 
    align-items: flex-start; 
    flex-wrap: wrap; 
    width: 100%;
    max-width: 900px;
}

/* Калкулатор и изображение */
#calculator, #sideImage { 
    flex: 1 1 300px; 
}

#calculator { 
    background:#fff; 
    padding:20px; 
    border-radius:10px; 
    box-shadow:0 0 10px rgba(0,0,0,0.2); 
    transform-origin: top center;
}

h2 { margin-top:0; margin-bottom:20px; }
.row { display:grid; grid-template-columns:200px 1fr; gap:10px; margin:6px 0; }
input[type="number"], input[list] { font-family:"MyNumericFont", monospace; font-size:15px; width:100%; box-sizing:border-box; padding:6px; }
select, button { font-family:"MyLocalFont", sans-serif; font-size:15px; width:100%; box-sizing:border-box; padding:6px; }
button { margin-top:10px; }
#btnCalc { background-color: #007BFF; color:#fff; border:none; cursor:pointer; }
#btnCalc:hover { background-color:#0056b3; }

#result { margin-top:16px; font-weight:600; font-family:"MyLocalFont"; }
#result span.value { font-family:"MyNumericFont"; }

#sideImage img { 
    max-width: 82%; 
    height: auto; 
    border: 1px solid #ccc; 
    border-radius: 10px; 
}

/* Responsive дизайн за малки екрани */
@media (max-width: 600px) {
    #container {
        flex-direction: column;
        align-items: center;
    }

    #calculator, #sideImage {
        width: 100%;
    }

    #sideImage {
        margin-top: 5px; /* пространство между калкулатора и изображението */
    }

    .row{grid-template-columns:1fr;} 
}
</style>
</head>
<body>

<div id="container">

    <div id="calculator">
        <h2>Coaxial cable capacitance</h2>

        <div class="row">
            <label>Inner conductor radius R1 (mm):</label>
            <input type="number" id="r1" value="0.5" step="0.01" min="0.01">
        </div>
        <div class="row">
            <label>Inner radius of outer conductor R2 (mm):</label>
            <input type="number" id="r2" value="2.5" step="0.01" min="0.01">
        </div>
        <div class="row">
            <label>Cable length L (m):</label>
            <input type="number" id="L" value="1" step="0.01" min="0.01">
        </div>

        <div class="row">
            <label>Dielectric εr:</label>
            <input type="number" id="dielectric" list="dielectrics" step="0.01" min="0.01" onchange="saveDielectric()">
            <datalist id="dielectrics">
                <option value="1.0006">Air [εr ≈ 1.0006]</option>
                <option value="2.1">PTFE [Teflon εr ≈ 2.1]</option>
                <option value="2.3">PE [Polyethylene εr ≈ 2.3]</option>
                <option value="1.7">Foamed PE [foam εr ≈ 1.7]</option>
                <option value="3.0">PVC [εr ≈ 3.0]</option>
            </datalist>
        </div>

        <div class="row">
            <button id="btnCalc" onclick="calculate()">Calculate capacitance (pF)</button>
        </div>

        <div id="result"><span class="value">0</span> pF</div>
    </div>

    <div id="sideImage">
        <img src="https://raw.githubusercontent.com/Xname41/Multilayer-capacitor-calculator/463cf16722adb3e9aa06da75683a19413407f339/coacial%20cable.png" alt="Схема коаксиален кабел">
    </div>

</div>

<script>
let currentEr = 2.3; // стойност по подразбиране

// Запазване на стойността в LocalStorage
function saveDielectric() {
    const dielecInput = document.getElementById('dielectric').value;
    if(dielecInput !== '') {
        currentEr = parseFloat(dielecInput);
        localStorage.setItem('lastDielectric', currentEr);
    }
}

// Зареждане на последния избор
window.onload = function() {
    const savedDielec = localStorage.getItem('lastDielectric');
    if (savedDielec) {
        currentEr = parseFloat(savedDielec);
        document.getElementById('dielectric').value = currentEr;
    }
}

function calculate() {
    const r1_mm = parseFloat(document.getElementById('r1').value);
    const r2_mm = parseFloat(document.getElementById('r2').value);
    const L = parseFloat(document.getElementById('L').value);
    const erInput = document.getElementById('dielectric').value;

    // Проверка дали диелектрика е въведен
    if(erInput === '' || isNaN(erInput)) {
        alert("Моля, въведете или изберете стойност за диелектричната константа!");
        return;
    }

    const er = parseFloat(erInput);

    if(r2_mm <= r1_mm) {
        alert("r2 трябва да е по-голямо от r1!");
        return;
    }

    const r1 = r1_mm / 1000;
    const r2 = r2_mm / 1000;

    const epsilon0 = 8.854e-12; // F/m
    const C_per_m = (2 * Math.PI * epsilon0 * er) / Math.log(r2 / r1);
    const C_total = C_per_m * L; // Фаради
    const C_pF = C_total * 1e12; // pF

    document.getElementById('result').innerHTML = `<span class="value">${C_pF.toFixed(3)}</span> pF`;
}

// --- Fullscreen ---
document.addEventListener('keydown',function(e){
    if(e.key==='F'||e.key==='f'){if(!document.fullscreenElement)document.documentElement.requestFullscreen();}
    else if(e.key==='Escape'){if(document.fullscreenElement)document.exitFullscreen();}
});
</script>

</body>
</html>
